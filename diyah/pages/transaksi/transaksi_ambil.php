<?phpsession_start();include("../../inc/koneksi.php");$s = isset($_POST["search"]) ? mysqli_real_escape_string($conn, $_POST["search"]["value"]) : "";$p = isset($_POST["start"]) && $_POST["start"] != "" && is_numeric($_POST["start"]) ? intval($_POST["start"]) : 0;$e = isset($_POST["length"]) && $_POST["length"] != "" && is_numeric($_POST["length"]) ? intval($_POST["length"]) : 10;$c = array(	"transaksi.kode_transaksi", 	"barang.kode_barang",	"barang.nama_barang",	"users.nama_user",	"transaksi.quantity",	"transaksi.tanggal_transaksi");$o = isset($_POST["order"]) ? array($c[intval($_POST["order"][0]["column"])], strtoupper($_POST["order"][0]["dir"])) : array($c[0], "DESC");$result["draw"] = $_POST["draw"];$query = mysqli_query($conn, "SELECT COUNT(*) AS total FROM transaksi");$row = mysqli_fetch_assoc($query);$result["recordsTotal"] = intval($row["total"]);$query = mysqli_query($conn, "SELECT COUNT(*) AS filtered FROM transaksi, barang, users WHERE barang.kode_barang=transaksi.kode_barang AND users.kode_user=transaksi.kode_user AND (barang.nama_barang LIKE '%{$s}%' OR users.nama_user LIKE '%{$s}%')");$row = mysqli_fetch_assoc($query);$result["recordsFiltered"] = intval($row["filtered"]);$query = mysqli_query($conn, "SELECT transaksi.*, barang.kode_barang, barang.nama_barang, users.nama_user FROM transaksi, barang, users WHERE barang.kode_barang=transaksi.kode_barang AND users.kode_user=transaksi.kode_user AND (barang.nama_barang LIKE '%{$s}%' OR users.nama_user LIKE '%{$s}%') ORDER BY {$o[0]} {$o[1]} LIMIT {$p},{$e}");$result["data"] = array();$baris = 0;while($row = mysqli_fetch_assoc($query)) {	array_push($result["data"], array(		$row["kode_transaksi"],		$row["kode_barang"],		htmlspecialchars($row["nama_barang"]),		htmlspecialchars($row["nama_user"]),		number_format($row["quantity"]),		$row["tanggal_transaksi"],		"<center><div style='width:88px;'><button class='btn btn-danger btn-aksi-sm-right' onclick='hapus({$baris});' style='width:100%;'><i class='fa fa-trash'></i> Hapus</button></div></center>"	));	$baris++;}echo json_encode($result);?>